<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">

  <title> Adding HTML Content to JavaFX Applications | JavaFX 2 Tutorials and Documentation</title> 

<!-- Add DARB meta tags here -->

<!-- Start JavaFX meta tags -->
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 1.0.22 Build 1">
<meta name="date" content="2013-12-06T8:52:22Z">
<meta name="description" content="This chapter introduces the JavaFX embedded browser, a user interface component that provides a web viewer and full browsing functionality through its API.">
<meta name="robots" content="noarchive">
<meta name="doctitle" content="Adding HTML Content to JavaFX Applications">
<meta name="relnum" content="Release 2.2">
<meta name="partnum" content="E20487-08">
<meta name="description" content="Learn how to embed the WebView component in JavaFX 2 applications; enhance your rich internet application by applying visual effects, animation, and transformations; access and edit HTML content of a web page; and process mouse events on a web component.">
<meta name="keywords" content="Web, JavaFX Web component,  JavaFX 2 Web component, JavaFX HTML component, JavaFX 2 HTML component, HTML component in JavaFX, HTML component in JavaFX 2, Web component in JavaFX, Web component in JavaFX 2, JavaFX Web view, Web node in JavaFX, JavaFX 2 web node, JavaFX HTML 5, JavaFX 2 HTML 5">

<!-- Persistent copyright link from DARB output -->
<link rel="copyright" href="https://docs.oracle.com/javafx/dcommon/html/cpyr.htm" title="Copyright" type="text/html">

<!-- Links to JavaFX output template style sheets -->
<link href="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/javafx-darb-position.css" rel="stylesheet" type="text/css">
<link href="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/javafx-darb-fonts.css" rel="stylesheet" type="text/css">


<!-- START Prev and next buttons  -->

<!-- END prev/next link tags -->


<!-- Markup to fix IE CSS display problems -->
<!--[if IE 5]>
<style type="text/css"> 
/* place css box model fixes for IE 5* in this conditional comment */
.javafx #sidebar1 { width: 220px; }
</style>
<![endif]-->
<!--[if IE]>
<style type="text/css"> 
/* place css fixes for all versions of IE in this conditional comment */
.javafx #sidebar1 { padding-top: 30px; }
.javafx #mainContent li p{ margin:0; padding-bottom: 0px; }
.javafx #mainContent { zoom: 1; }
.javafx #mainContent {
	margin: 0px 290px 0px 0px; /* the right margin on this div element creates the column down the right side of the page - no matter how much content the sidebar1 div contains, the column space will remain. You can remove this margin if you want the #mainContent div's text to fill the #sidebar1 space when the content in #sidebar1 ends. */
	padding: 10px; /* remember that padding is the space inside the div box and margin is the space outside the div box */
	width:600px;/*should be 615 but ie6 doesn't work;*/
	border-right-style:none;
	border-right-color:#C7C7C7;
	border-right-width:0px;
	background-image:url(../../javafx/images/fx_boxback.jpg);
	background-repeat:no-repeat;
	z-index:0;
} 
/* the above proprietary zoom property gives IE the hasLayout it needs to avoid several bugs */
</style>
<![endif]-->

<!-- Visibility toggle script -->
<script type="text/javascript">
<!--
    function toggle_visibility(id) {
       var e = document.getElementById(id);
       if(e.style.display == 'block')
          e.style.display = 'none';
       else
          e.style.display = 'block';
    }
//-->
</script>

</head>

<body class="javafx">
<!-- The following markup is required for accessibility -->
<noscript>
JavaScript is not supported by your browser.  JavaScript support is required for full functionality of this page.
</noscript> 


<!-- ///////// Container ///////// -->
  <div id="container">

<!--///////// Header /////////-->
  <div id="header">
  	<div id="headerfxtrail" class="breadcrumb"><a href="https://docs.oracle.com/javafx/index.html">JavaFX Documentation Home</a> &gt; Adding HTML Content to JavaFX Applications
  </div>
  <!-- end #header --></div>
<!--///////// End Header /////////-->
  
  
<!--///////// Start Side Bar /////////-->  
  <div id="sidebar">
   
  <!-- Sidebar item 1. This <div> is obligatory --> 
  <div id="sidebar_version_box" class="FX_type_med_gry">
     <h1>Release: JavaFX 2.2</h1>
     <p>Last Updated: January 2014<br></p>
   <p><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.pdf">Download as PDF</a></p>  
  <!-- end obligatory sidebar_version_box --></div>
  
  <!-- Sidebar item 2 Table of Contents. This <div> is optional --> 
  <div id="sidebar_toc_box" class="FX_type_med_gry">
     <h2 class="boxtitle"><a href="#" onclick="toggle_visibility('toc');">[+] Show/Hide Table of Contents</a></h2>
  <div id="toc" style="display:none;">

   <ul style="list-style-type:none">
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref3">Supported Features of HTML5</a></li>
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref4">Embedded Browser API</a>
<ul style="list-style-type:none">
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref6">WebEngine Class</a></li>
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref7">WebView Class</a></li>
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref8">PopupFeatures Class</a></li>
</ul>
</li>
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref9">Adding WebView to the Application Scene</a></li>
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref12">Processing JavaScript Commands</a></li>
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref15">Making Upcalls from JavaScript to JavaFX</a></li>
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref18">Managing Web Pop-Up Windows</a></li>
<li><a href="https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm#sthref21">Managing Web History</a></li>
</ul>
 

  <!-- End toggle box --></div>
  <!-- End item 2 TOC box --></div> 
  
  <!-- Sidebar item 3 DemoApp box. This <div> is optional --> 
   <div id="sidebar_demoapp_box" class="FX_type_med_gry">
    <h2 class="boxtitle">Application Files</h2>
    <h3>View Source Code</h3>
    <ul>
        <li><a href="https://docs.oracle.com/javafx/2/webview/WebViewSample.java.htm">WebViewSample.java</a></li>
        <li><a href="https://docs.oracle.com/javafx/2/webview/BrowserToolbar.css.htm">BrowserToolbar.css</a></li>
        <li><a href="https://docs.oracle.com/javafx/2/webview/help.html">help.html</a></li>
        <li><a href="https://docs.oracle.com/javafx/2/webview/blog.png.html">blog.png</a></li>
        <li><a href="https://docs.oracle.com/javafx/2/webview/documentation.png.html">documentation.png</a></li>
        <li><a href="https://docs.oracle.com/javafx/2/webview/partners.png.html">partners.png</a></li>
        <li><a href="https://docs.oracle.com/javafx/2/webview/product.png.html">product.png</a></li>
		<li><a href="https://docs.oracle.com/javafx/2/webview/help.png.html">help.png</a></li>
    </ul>
    <h3>Download Source Code</h3>
    <ul>
        <li><a href="https://docs.oracle.com/javafx/2/webview/WebViewSample.zip">WebViewSample.zip</a></li>
    </ul>
</div>  
  <!-- End item 3 DemoApp box -->
  
  <!-- Sidebar item 4 Profile box. This <div> is optional --> 
   <div id="sidebar_profile_box" class="FX_type_med_gry">
    <h2 class="boxtitle">Profiles</h2>
    <div class="profile">
    <h3>Alla Redko</h3>
     <p><em>Technical Writer, Oracle</em> </p>
     <p><img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/alla_redko_sm.jpg" alt="The picture of the author">Alla
 is a technical writer for Oracle. She lives in St. Petersburg, Russia, 
and develops tutorials and technical articles for Java and JavaFX 
technologies. Prior to her assignment at Oracle, she worked as a 
technical writer in different IT companies. </p>
    </div>
</div>  
  <!-- end Box 4 Profile -->  
  
  <!-- Sidebar item 5 Feedback box. This <div> is optional -->
  <!-- [REPLACE_MULTIP_FEEDBACK] -->
  <!-- end Box 5 Profile -->

  <!-- Sidebar item 5 Feedback box. This <div> is optional -->
  <div id="sidebar_feedback_box" class="FX_type_med_gry">

<h2 class="boxtitle">We Welcome Your Comments</h2>

<p>Send us <a href="mailto:jfx-docs-feedback_ww@oracle.com?subject=Feedback:%20Adding%20HTML%20Content%20to%20JavaFX%20Applications">feedback about this document.</a></p>

<p>If you have questions about JavaFX, please go to the <a href="http://forums.oracle.com/forums/forum.jspa?forumID=1385">forum.</a></p>

</div>


  <!-- end Box 5 Profile -->
  
  <!-- end #sidebar --></div>
  
  <!--///////// End Side Bar /////////-->
  
  
<!--///////// Main Content /////////-->
  <div id="mainContent">
  
  <!-- Book Info div is used only for multipage documents -->
  <div id="bookTitle">
      <!--<h1> </h1>-->
  </div> 
  <!-- End BookInfo div tag -->

  <!-- START NEXT_PREVIOUS BUTTONS -->
  <!-- [REPLACE_NEXT_PREVIOUS] -->
  <!-- END NEXT_PREVIOUS BUTTONS -->
   
  
  <div id="ind"> 

<!-- /////////////// Start content copied from DARB output ////////////// -->

	<a id="JFXWN101" name="JFXWN101"></a> <a id="sthref2" name="sthref2"></a>
<h1 class="chapter">Adding HTML Content to JavaFX Applications</h1>
<a id="JFXWN102" name="JFXWN102"></a>
<p>This chapter introduces the JavaFX embedded browser, a user interface
 component that provides a web viewer and full browsing functionality 
through its API.</p>
<p>The embedded browser component is based on <a href="http://www.webkit.org/">WebKit</a>,
 an open source web browser engine. It supports Cascading Style Sheets 
(CSS), JavaScript, Document Object Model (DOM), and HTML5.</p>
<p>The embedded browser enables you to perform the following tasks in your JavaFX applications:</p>
<ul>
<li>
<p>Render HTML content from local and remote URLs</p>
</li>
<li>
<p>Obtain Web history</p>
</li>
<li>
<p>Execute JavaScript commands</p>
</li>
<li>
<p>Perform upcalls from JavaScript to JavaFX</p>
</li>
<li>
<p>Manage web pop-up windows</p>
</li>
<li>
<p>Apply effects to the embedded browser</p>
</li>
</ul>
<a id="JFXWN103" name="JFXWN103"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref3" name="sthref3"></a>
<h2 class="sect1">Supported Features of HTML5</h2>
<p>The current implementation of the WebView component supports the following HTML5 features:</p>
<ul>
<li>
<p>Canvas</p>
</li>
<li>
<p>Media Playback</p>
</li>
<li>
<p>Form controls (except for <code>&lt;input type="color"&gt;</code> )</p>
</li>
<li>
<p>Editable content</p>
</li>
<li>
<p>History maintenance</p>
</li>
<li>
<p>Support for the <code>&lt;meter&gt;</code> and <code>&lt;progress&gt;</code> tags.</p>
</li>
<li>
<p>Support for the <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> tags.</p>
</li>
<li>
<p>DOM</p>
</li>
<li>
<p>SVG</p>
</li>
<li>
<p>Support for domain names written in national languages</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="JFXWN104" name="JFXWN104"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref4" name="sthref4"></a>
<h2 class="sect1">Embedded Browser API</h2>
<p>The embedded browser inherits all fields and methods from the <code>Node</code> class, and therefore, it has all its features.</p>
<p>The classes that constitute the embedded browser reside in the <code>javafx.scene.web</code> package. <a href="#CEGGJDAC">Figure 1</a> shows the architecture of the embedded browser and how it relates to other JavaFX classes.</p>
<div class="figure"><a id="CEGGJDAC" name="CEGGJDAC"></a><a id="JFXWN105" name="JFXWN105"></a>
<p class="titleinfigure">Figure 1 Architecture of the Embedded Browser</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-structure.png" alt="Architecture of the WebView component" title="Architecture of the WebView component" longdesc="img_text/webview-structure.htm"><br>
<a id="sthref5" name="sthref5" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-structure.htm">Description of "Figure 1 Architecture of the Embedded Browser"</a><br>
<br></div>
<!-- class="figure" -->
<a id="JFXWN106" name="JFXWN106"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref6" name="sthref6"></a>
<h3 class="sect2">WebEngine Class</h3>
<p>The <code>WebEngine</code> class provides basic web page 
functionality. It supports user interaction such as navigating links and
 submitting HTML forms, although it does not interact with users 
directly. The <code>WebEngine</code> class handles one web page at a 
time. It supports the basic browsing features of loading HTML content 
and accessing the DOM as well as executing JavaScript commands.</p>
<p>Two constructors enable you to create a <code>WebEngine</code> 
object: an empty constructor and a constructor with the specified URL. 
If you instantiate an empty constructor, the URL can be passed to a <code>WebEngine</code> object through the <code>load</code> method.</p>
<p>Starting JavaFX SDK 2.2, developers can enable and disable JavaScript
 calls for a particular web engine and apply custom style sheets. User 
style sheets replace the default styles on the pages rendered in this <code>WebEngine</code> instance with user-defined ones.</p>
</div>
<!-- class="sect2" -->
<a id="JFXWN107" name="JFXWN107"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref7" name="sthref7"></a>
<h3 class="sect2">WebView Class</h3>
<p>The <code>WebView</code> class is an extension of the <code>Node</code> class. It encapsulates a <code>WebEngine</code>
 object, incorporates HTML content into an application's scene, and 
provides properties and methods to apply effects and transformations. 
The <code>getEngine()</code> method called on a <code>WebView</code> object returns a web engine associated with it.</p>
<p><a href="#CEGHBDHF">Example 1</a> shows the typical way to create <code>WebView</code> and <code>WebEngine</code> objects in your application.</p>
<div class="example"><a id="CEGHBDHF" name="CEGHBDHF"></a><a id="JFXWN108" name="JFXWN108"></a>
<p class="titleinexample">Example 1 Creating WebView and WebEngine Objects</p>
<pre xml:space="preserve" class="oac_no_warn">WebView browser = new WebView();
WebEngine webEngine = browser.getEngine();
webEngine.load("http://mySite.com");
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="JFXWN109" name="JFXWN109"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref8" name="sthref8"></a>
<h3 class="sect2">PopupFeatures Class</h3>
<p>The <code>PopupFeatures</code> class describes the features of a web 
pop-up window as defined by the JavaScript specification. When you need 
to open a new browser window in your application, the instances of this 
class are passed into pop-up handlers registered on a <code>WebEngine</code> object by using the <code>setCreatePopupHandler</code> method as shown in <a href="#CEGCFHCB">Example 2</a>.</p>
<div class="example"><a id="CEGCFHCB" name="CEGCFHCB"></a><a id="JFXWN110" name="JFXWN110"></a>
<p class="titleinexample">Example 2 Creating a Pop-Up Handler</p>
<pre xml:space="preserve" class="oac_no_warn">webEngine.setCreatePopupHandler(new Callback&lt;PopupFeatures, WebEngine&gt;() {
    @Override public WebEngine call(PopupFeatures config) {                
        // do something
        // return a web engine for the new browser window
    }
});
</pre></div>
<!-- class="example" -->
<p>If the method returns the web engine of the same <code>WebView</code> object, the target document is opened in the same browser window. To open the target document in another window, specify the <code>WebEngine</code> object of another web view. When you need to block the pop-up windows, return the <code>null</code> value.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="JFXWN111" name="JFXWN111"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref9" name="sthref9"></a>
<h2 class="sect1">Adding WebView to the Application Scene</h2>
<p>The WebViewSample application creates the <code>Browser</code> class that encapsulates both the <code>WebView</code> object and the toolbar with UI controls. The <code>WebViewSample</code> class of the application creates the scene and adds a <code>Browser</code> object to the scene.</p>
<p><a href="#CEGDIBBI">Example 3</a> shows how to add the <code>WebView</code> component to the application scene.</p>
<div class="example"><a id="CEGDIBBI" name="CEGDIBBI"></a><a id="JFXWN112" name="JFXWN112"></a>
<p class="titleinexample">Example 3 Creating a Browser</p>
<pre xml:space="preserve" class="oac_no_warn">import javafx.application.Application;
import javafx.geometry.HPos;
import javafx.geometry.VPos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.paint.Color;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
 
 
public class WebViewSample extends Application {
    private Scene scene;
    @Override public void start(Stage stage) {
        // create the scene
        stage.setTitle("Web View");
        scene = new Scene(new Browser(),750,500, Color.web("#666970"));
        stage.setScene(scene);
        scene.getStylesheets().add("webviewsample/BrowserToolbar.css");        
        stage.show();
    }
 
    public static void main(String[] args){
        launch(args);
    }
}
class Browser extends Region {
 
    <span class="bold">final WebView browser = new WebView();</span>
    <span class="bold">final WebEngine webEngine = browser.getEngine();</span>
     
    public Browser() {
        //apply the styles
        getStyleClass().add("browser");
        // load the web page
        <span class="bold">webEngine.load("http://www.oracle.com/products/index.html");</span>
        //add the web view to the scene
        <span class="bold">getChildren().add(browser);</span>
 
    }
    private Node createSpacer() {
        Region spacer = new Region();
        HBox.setHgrow(spacer, Priority.ALWAYS);
        return spacer;
    }
 
    @Override protected void layoutChildren() {
        double w = getWidth();
        double h = getHeight();
        layoutInArea(browser,0,0,w,h,0, HPos.CENTER, VPos.CENTER);
    }
 
    @Override protected double computePrefWidth(double height) {
        return 750;
    }
 
    @Override protected double computePrefHeight(double width) {
        return 500;
    }
}
</pre></div>
<!-- class="example" -->
<p>In this code, the web engine loads a URL that points to the Oracle corporate web site. The <code>WebView</code> object that contains this web engine is added to the application scene by using the <code>getChildren</code> and <code>add</code> methods.</p>
<p>The <code>createSpacer</code>, <code>layoutChildren</code>, <code>computePrefWidth</code>, and <code>computePrefHeight</code> methods perform layout of the <code>WebView</code> object and the control elements in the application toolbar.</p>
<p>When you add, compile, and run this code fragment, it produces the application window shown in <a href="#CEGGDCDG">Figure 2</a>.</p>
<div class="figure"><a id="CEGGDCDG" name="CEGGDCDG"></a><a id="JFXWN113" name="JFXWN113"></a>
<p class="titleinfigure">Figure 2 WebView Object in an Application Scene</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-add.png" alt="WebView object" title="WebView object" longdesc="img_text/webview-add.htm"><br>
<a id="sthref10" name="sthref10" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-add.htm">Description of "Figure 2 WebView Object in an Application Scene "</a><br>
<br></div>
<!-- class="figure" -->
<p>Add a toolbar with four <code>Hyperlink</code> objects to switch between different Oracle web resources. Study the modified code of the <code>Browser</code> class shown in <a href="#CEGHGCHB">Example 4</a>.
 It adds URLs for alternative web resources including Oracle products, 
blogs, Java documentation, and the partner network. The code fragment 
also creates a toolbar and adds the hyperlinks to it.</p>
<div class="example"><a id="CEGHGCHB" name="CEGHGCHB"></a><a id="JFXWN114" name="JFXWN114"></a>
<p class="titleinexample">Example 4 Creating a Toolbar</p>
<pre xml:space="preserve" class="oac_no_warn">import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.HPos;
import javafx.geometry.VPos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Hyperlink;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.paint.Color;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
 
public class WebViewSample extends Application {
 
    private Scene scene;
 
    @Override public void start(Stage stage) {
        // create scene
        stage.setTitle("Web View");
        scene = new Scene(new Browser(),750,500, Color.web("#666970"));
        stage.setScene(scene);
        scene.getStylesheets().add("webviewsample/BrowserToolbar.css");
        // show stage
        stage.show();
    }
 
    public static void main(String[] args){
        launch(args);
    }
}
class Browser extends Region {
   private HBox toolBar;
 
   private static String[] imageFiles = new String[]{
        "product.png",
        "blog.png",
        "documentation.png",
        "partners.png"
    };
    private static String[] captions = new String[]{
        "Products",
        "Blogs",
        "Documentation",
        "Partners"
    };
 
    private static String[] urls = new String[]{
        "http://www.oracle.com/products/index.html",
        "http://blogs.oracle.com/",
        "http://docs.oracle.com/javase/index.html",
        "http://www.oracle.com/partners/index.html"
    };
 
    final ImageView selectedImage = new ImageView();
    final Hyperlink[] hpls = new Hyperlink[captions.length];
    final Image[] images = new Image[imageFiles.length];
    final WebView browser = new WebView();
    final WebEngine webEngine = browser.getEngine();
 
    public Browser() {       
        //apply the styles
        getStyleClass().add("browser");
        
        <span class="bold">for (int i = 0; i &lt; captions.length; i++) {</span>
            <span class="bold">final Hyperlink hpl = hpls[i] = new Hyperlink(captions[i]);</span>
            <span class="bold">Image image = images[i] =</span>
                <span class="bold">new Image(getClass().getResourceAsStream(imageFiles[i]));</span>
            <span class="bold">hpl.setGraphic(new ImageView (image));</span>
            <span class="bold">final String url = urls[i];</span>
 
            <span class="bold">hpl.setOnAction(new EventHandler&lt;ActionEvent&gt;() {</span>
                <span class="bold">@Override</span>
                <span class="bold">public void handle(ActionEvent e) {</span>
                    <span class="bold">webEngine.load(url);</span>   
                <span class="bold">}</span>
            <span class="bold">});</span>
        <span class="bold">}</span>        
 
// load the home page        
        webEngine.load("http://www.oracle.com/products/index.html");
        
// create the toolbar
        <span class="bold">toolBar = new HBox();</span>
        <span class="bold">toolBar.getStyleClass().add("browser-toolbar");</span>
        <span class="bold">toolBar.getChildren().addAll(hpls);</span>        
    
        //add components
        getChildren().add(toolBar);
        getChildren().add(browser); 
    }
 
    private Node createSpacer() {
        Region spacer = new Region();
        HBox.setHgrow(spacer, Priority.ALWAYS);
        return spacer;
    }
 
    @Override protected void layoutChildren() {
        double w = getWidth();
        double h = getHeight();
        double tbHeight = toolBar.prefHeight(w);
        layoutInArea(browser,0,0,w,h-tbHeight,0, HPos.CENTER, VPos.CENTER);
        layoutInArea(toolBar,0,h-tbHeight,w,tbHeight,0,HPos.CENTER,VPos.CENTER);
    }
 
    @Override protected double computePrefWidth(double height) {
        return 750;
    }
 
    @Override protected double computePrefHeight(double width) {
        return 500;
    }
}
</pre></div>
<!-- class="example" -->
<p>This code uses a <code>for</code> loop to create the hyperlinks. The <code>setOnAction</code> method defines the behavior of the hyperlinks. When a user clicks a link, the corresponding URL value is passed to the <code>load</code> method of the <code>webEngine</code>. When you compile and run the modified application, the application window changes as shown in <a href="#CEGDBBAH">Figure 3</a>.</p>
<div class="figure"><a id="CEGDBBAH" name="CEGDBBAH"></a><a id="JFXWN115" name="JFXWN115"></a>
<p class="titleinfigure">Figure 3 Embedded Browser with the Navigation Toolbar</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-partner.png" alt="Description of Figure 3 follows" title="Description of Figure 3 follows" longdesc="img_text/webview-partner.htm"><br>
<a id="sthref11" name="sthref11" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-partner.htm">Description of "Figure 3 Embedded Browser with the Navigation Toolbar"</a><br>
<br></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="JFXWN116" name="JFXWN116"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref12" name="sthref12"></a>
<h2 class="sect1">Processing JavaScript Commands</h2>
<p>The <code>WebEngine</code> class provides the <code>executeScript</code> method to run a particular JavaScript command for the document currently loaded into the browser.</p>
<p>The modified application code in <a href="#CEGBCBBB">Example 5</a> 
creates an additional button to hide and show the Java SE documentation 
for the previous releases. The button is added to the toolbar only when 
the Documentation page is selected.</p>
<div class="example"><a id="CEGBCBBB" name="CEGBCBBB"></a><a id="JFXWN117" name="JFXWN117"></a>
<p class="titleinexample">Example 5 Adding the Toggle Previous Docs button</p>
<pre xml:space="preserve" class="oac_no_warn">import javafx.application.Application;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.concurrent.Worker.State;
import javafx.event.ActionEvent;
import javafx.event.Event;
import javafx.event.EventHandler;
import javafx.geometry.HPos;
import javafx.geometry.Pos;
import javafx.geometry.VPos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Hyperlink;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.paint.Color;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
 
public class WebViewSample extends Application {
 
    private Scene scene;
 
    @Override
    public void start(Stage stage) {
        // create scene
        stage.setTitle("Web View");
        scene = new Scene(new Browser(), 750, 500, Color.web("#666970"));
        stage.setScene(scene);
        // apply CSS style
        scene.getStylesheets().add("webviewsample/BrowserToolbar.css");
        // show stage
        stage.show();
    }
 
    public static void main(String[] args) {
        launch(args);
    }
}
 
class Browser extends Region {
 
    private HBox toolBar;
    private static String[] imageFiles = new String[]{
        "product.png",
        "blog.png",
        "documentation.png",
        "partners.png",
    };
    private static String[] captions = new String[]{
        "Products",
        "Blogs",
        "Documentation",
        "Partners",
    };
    private static String[] urls = new String[]{
        "http://www.oracle.com/products/index.html",
        "http://blogs.oracle.com/",
        "http://docs.oracle.com/javase/index.html",
        "http://www.oracle.com/partners/index.html",
    };
    final ImageView selectedImage = new ImageView();
    final Hyperlink[] hpls = new Hyperlink[captions.length];
    final Image[] images = new Image[imageFiles.length];
    final WebView browser = new WebView();
    final WebEngine webEngine = browser.getEngine();
    <span class="bold">final Button showPrevDoc = new Button("Toggle Previous Docs");</span>
    <span class="bold">private boolean needDocumentationButton = false;</span>
 
    public Browser() {
        //apply the styles
        getStyleClass().add("browser");
 
        for (int i = 0; i &lt; captions.length; i++) {
            // create hyperlinks
            Hyperlink hpl = hpls[i] = new Hyperlink(captions[i]);
            Image image = images[i] =
                    new Image(getClass().getResourceAsStream(imageFiles[i]));
            hpl.setGraphic(new ImageView(image));
            final String url = urls[i];
            final boolean addButton = (hpl.getText().equals("Documentation"));
 
            // process event 
            <span class="bold">hpl.setOnAction(new EventHandler&lt;ActionEvent&gt;() {</span>
                <span class="bold">@Override</span>
                <span class="bold">public void handle(ActionEvent e) {</span>
                    <span class="bold">needDocumentationButton = addButton;</span>
                    <span class="bold">webEngine.load(url);</span>
                <span class="bold">}</span>
            <span class="bold">});</span>
        }
 
     
        // create the toolbar
        toolBar = new HBox();
        toolBar.setAlignment(Pos.CENTER);
        toolBar.getStyleClass().add("browser-toolbar");
        toolBar.getChildren().addAll(hpls);
        toolBar.getChildren().add(createSpacer());
 
        //set action for the button
        <span class="bold">showPrevDoc.setOnAction(new EventHandler() {</span>
            <span class="bold">@Override</span>
            <span class="bold">public void handle(Event t) {</span>
                <span class="bold">webEngine.executeScript("toggleDisplay('PrevRel')");</span>
            <span class="bold">}</span>           
        <span class="bold">});</span>
       
        // process page loading
        <span class="bold">webEngine.getLoadWorker().stateProperty().addListener(</span>
            <span class="bold">new ChangeListener&lt;State&gt;() {</span>
                <span class="bold">@Override</span>
                <span class="bold">public void changed(ObservableValue&lt;? extends State&gt; ov,</span>
                    <span class="bold">State oldState, State newState) {</span>
                        <span class="bold">toolBar.getChildren().remove(showPrevDoc);</span>
                        <span class="bold">if (newState == State.SUCCEEDED) {</span>
                            <span class="bold">if (needDocumentationButton) {</span>
                                <span class="bold">toolBar.getChildren().add(showPrevDoc);</span>
                            <span class="bold">}</span>
                        <span class="bold">}</span>
                    <span class="bold">}</span>
                <span class="bold">}</span>
        <span class="bold">);</span>
 
        // load the home page        
        webEngine.load("http://www.oracle.com/products/index.html");
 
        //add components
        getChildren().add(toolBar);
        getChildren().add(browser);
    }
 
    private Node createSpacer() {
        Region spacer = new Region();
        HBox.setHgrow(spacer, Priority.ALWAYS);
        return spacer;
    }
 
    @Override
    protected void layoutChildren() {
        double w = getWidth();
        double h = getHeight();
        double tbHeight = toolBar.prefHeight(w);
        layoutInArea(browser,0,0,w,h-tbHeight,0,HPos.CENTER, VPos.CENTER);
        layoutInArea(toolBar,0,h-tbHeight,w,tbHeight,0,HPos.CENTER,VPos.CENTER);
    }
 
    @Override
    protected double computePrefWidth(double height) {
        return 750;
    }
 
    @Override
    protected double computePrefHeight(double width) {
        return 600;
    }
}
</pre></div>
<!-- class="example" -->
<p>Loading always happens on a background thread. Methods that initiate 
loading return immediately after scheduling a background job. The <code>getLoadWorker()</code> method provides an instance of the <code>Worker</code> interface to track the loading progress. If the progress status of the Documentation page is <code>SUCCEEDED</code>, the Toggle Previous Docs button is added to the toolbar, as shown in <a href="#CEGECFJI">Figure 4</a>.</p>
<div class="figure"><a id="CEGECFJI" name="CEGECFJI"></a><a id="JFXWN118" name="JFXWN118"></a>
<p class="titleinfigure">Figure 4 Toggle Previous Docs Button</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-forums.png" alt="Embedded browser with the navigation toolbar" title="Embedded browser with the navigation toolbar" longdesc="img_text/webview-forums.htm"><br>
<a id="sthref13" name="sthref13" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-forums.htm">Description of "Figure 4 Toggle Previous Docs Button "</a><br>
<br></div>
<!-- class="figure" -->
<p>The <code>setOnAction</code> method shown in <a href="#CEGGFEAB">Example 6</a> defines behavior for the Toggle Previous Docs button.</p>
<div class="example"><a id="CEGGFEAB" name="CEGGFEAB"></a><a id="JFXWN119" name="JFXWN119"></a>
<p class="titleinexample">Example 6 Executing a JavaScript Command</p>
<pre xml:space="preserve" class="oac_no_warn">showPrevDoc.setOnAction(new EventHandler() {
    @Override
    public void handle(Event t) {
        <span class="bold">webEngine.executeScript("toggleDisplay('PrevRel')");</span>
    }           
});
</pre></div>
<!-- class="example" -->
<p>When the user clicks the Toggle Previous Doc button, the <code>executeScript</code> method runs the <code>toggleDisplay</code> JavaScript function for the Documentation page, and the documents for the previous Java releases appear, as shown in <a href="#CEGBEEHD">Figure 5</a>. When the user performs another click, the <code>toggleDisplay</code> function hides the lists of the documents.</p>
<div class="figure"><a id="CEGBEEHD" name="CEGBEEHD"></a><a id="JFXWN120" name="JFXWN120"></a>
<p class="titleinfigure">Figure 5 Showing the Java SE Documentation</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-show-all.png" alt="Description of Figure 5 follows" title="Description of Figure 5 follows" longdesc="img_text/webview-show-all.htm"><br>
<a id="sthref14" name="sthref14" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-show-all.htm">Description of "Figure 5 Showing the Java SE Documentation"</a><br>
<br></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="JFXWN121" name="JFXWN121"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref15" name="sthref15"></a>
<h2 class="sect1">Making Upcalls from JavaScript to JavaFX</h2>
<p>Now that you know how to invoke JavaScript from JavaFX, you can 
explore the opposite functionality — calling from web content to JavaFX.
 The general concept is to create an interface object in the JavaFX 
application and make it known to JavaScript by calling the <code>JSObject.setMember()</code> method. After that, you can call public methods and access public fields of this object from JavaScript.</p>
<p>For the WebViewSample application, you create the Help toolbar item 
that leads to the help.html file, where a user can preview reference 
material about Oracle websites. By clicking the Exit the Application 
link in the help.html file, the user exits the WebViewSample 
application. Modify the application, as shown in <a href="#CEGHJJCA">Example 7</a>, to implement this functionality.</p>
<div class="example"><a id="CEGHJJCA" name="CEGHJJCA"></a><a id="JFXWN122" name="JFXWN122"></a>
<p class="titleinexample">Example 7 Closing JavaFX Application by Using JavaScript</p>
<pre xml:space="preserve" class="oac_no_warn">import javafx.application.Application;
import javafx.application.Platform;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.concurrent.Worker.State;
import javafx.event.ActionEvent;
import javafx.event.Event;
import javafx.event.EventHandler;
import javafx.geometry.HPos;
import javafx.geometry.Pos;
import javafx.geometry.VPos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Hyperlink;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.paint.Color;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
import netscape.javascript.JSObject;
 
public class WebViewSample extends Application {
 
    private Scene scene;
 
    @Override
    public void start(Stage stage) {
        // create scene
        stage.setTitle("Web View");
        scene = new Scene(new Browser(), 750, 500, Color.web("#666970"));
        stage.setScene(scene);
        // apply CSS style
        scene.getStylesheets().add("webviewsample/BrowserToolbar.css");
        // show stage
        stage.show();
    }
 
    public static void main(String[] args) {
        launch(args);
    }
}
 
class Browser extends Region {
 
    private HBox toolBar;
    private static String[] imageFiles = new String[]{
        "product.png",
        "blog.png",
        "documentation.png",
        "partners.png",
        <span class="bold">"help.png"</span>
    };
    private static String[] captions = new String[]{
        "Products",
        "Blogs",
        "Documentation",
        "Partners",
        "<span class="bold">Help"</span>
    };
    private static String[] urls = new String[]{
        "http://www.oracle.com/products/index.html",
        "http://blogs.oracle.com/",
        "http://docs.oracle.com/javase/index.html",
        "http://www.oracle.com/partners/index.html",
        <span class="bold">WebViewSample.class.getResource("help.html").toExternalForm()</span>
    };
    final ImageView selectedImage = new ImageView();
    final Hyperlink[] hpls = new Hyperlink[captions.length];
    final Image[] images = new Image[imageFiles.length];
    final WebView browser = new WebView();
    final WebEngine webEngine = browser.getEngine();
    final Button showPrevDoc = new Button("Toggle Previous Docs");
    private boolean needDocumentationButton = false;
 
    public Browser() {
        //apply the styles
        getStyleClass().add("browser");
 
        for (int i = 0; i &lt; captions.length; i++) {
            // create hyperlinks
            Hyperlink hpl = hpls[i] = new Hyperlink(captions[i]);
            Image image = images[i] =
                    new Image(getClass().getResourceAsStream(imageFiles[i]));
            hpl.setGraphic(new ImageView(image));
            final String url = urls[i];
            final boolean addButton = (hpl.getText().equals("Documentation"));
 
            // process event 
            hpl.setOnAction(new EventHandler&lt;ActionEvent&gt;() {
                @Override
                public void handle(ActionEvent e) {
                    needDocumentationButton = addButton;
                    webEngine.load(url);
                }
            });
        }
 
       
        // create the toolbar
        toolBar = new HBox();
        toolBar.setAlignment(Pos.CENTER);
        toolBar.getStyleClass().add("browser-toolbar");
        toolBar.getChildren().addAll(hpls);
        toolBar.getChildren().add(createSpacer());
 
        //set action for the button
        showPrevDoc.setOnAction(new EventHandler() {
            @Override
            public void handle(Event t) {
                webEngine.executeScript("toggleDisplay('PrevRel')");
            }           
        });
 
        // process page loading
        webEngine.getLoadWorker().stateProperty().addListener(
            new ChangeListener&lt;State&gt;() {
                @Override
                public void changed(ObservableValue&lt;? extends State&gt; ov,
                    State oldState, State newState) {
                    toolBar.getChildren().remove(showPrevDoc);    
                    if (newState == State.SUCCEEDED) {
                            <span class="bold">JSObject win =</span> 
                                <span class="bold">(JSObject) webEngine.executeScript("window");</span>
                            <span class="bold">win.setMember("app", new JavaApp());</span>
                            if (needDocumentationButton) {
                                toolBar.getChildren().add(showPrevDoc);
                            }
                        }
                    }
                }
        );
 
        // load the home page        
        webEngine.load("http://www.oracle.com/products/index.html");
 
        //add components
        getChildren().add(toolBar);
        getChildren().add(browser);
    }
 
    // JavaScript interface object
    <span class="bold">public class JavaApp {</span>
 
        <span class="bold">public void exit() {</span>
            <span class="bold">Platform.exit();</span>
        <span class="bold">}</span>
    <span class="bold">}</span>
 
    private Node createSpacer() {
        Region spacer = new Region();
        HBox.setHgrow(spacer, Priority.ALWAYS);
        return spacer;
    }
 
    @Override
    protected void layoutChildren() {
        double w = getWidth();
        double h = getHeight();
        double tbHeight = toolBar.prefHeight(w);
        layoutInArea(browser,0,0,w,h-tbHeight,0,HPos.CENTER, VPos.CENTER);
        layoutInArea(toolBar,0,h-tbHeight,w,tbHeight,0,HPos.CENTER,VPos.CENTER);
    }
 
    @Override
    protected double computePrefWidth(double height) {
        return 750;
    }
 
    @Override
    protected double computePrefHeight(double width) {
        return 600;
    }
}
</pre></div>
<!-- class="example" -->
<p>Examine the bold lines in <a href="#CEGHJJCA">Example 7</a>. The <code>exit()</code> method of the <code>JavaApp</code>
 interface is public; therefore, it can be accessed externally. When 
this method is called, it causes the JavaFX application to terminate.</p>
<p>The <code>JavaApp</code> interface is set as a member of the <code>JSObject</code> instance, so that JavaScript becomes aware of that interface. It becomes known to JavaScript under the name <code>window.app</code>, or just <code>app</code>, and its only method can be called from JavaScript as <code>app.exit()</code>. See <a href="#CEGBEEIF">Example 8</a> to evaluate how this call is implemented in the help.html file.</p>
<div class="example"><a id="CEGBEEIF" name="CEGBEEIF"></a><a id="JFXWN123" name="JFXWN123"></a>
<p class="titleinexample">Example 8 Making a Call to the WebViewSample Application from the Help File</p>
<pre xml:space="preserve" class="oac_no_warn">&lt;html lang="en"&gt;
&lt;body&gt;
&lt;p&gt;Help&lt;/p&gt;    
&lt;ul&gt;
  &lt;li&gt;Products - Extensive overview of Oracle hardware and software products, 
      and summary Oracle consulting, support, and educational services. &lt;/li&gt;
  &lt;li&gt;Blogs - Oracle blogging community (use the Hide All and Show All buttons 
      to collapse and expand the list of topics).&lt;/li&gt;
  &lt;li&gt;Documentation - Landing page to start learning Java. The page contains
      links to the Java tutorials, developer guides, and API documentation.
      various Oracle products and solution.&lt;/li&gt;
  &lt;li&gt;Partners - Oracle partner solutions and programs. Popular resources and 
      membership opportunities.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="about:blank" onclick="<span class="bold">app.exit()</span>"&gt;Exit the Application&lt;/a&gt;&lt;/p&gt;    
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
<!-- class="example" -->
<p>When you compile and run the WebViewSample application, the new icon appears, as shown in <a href="#CEGGCEFJ">Figure 6</a>.</p>
<div class="figure"><a id="CEGGCEFJ" name="CEGGCEFJ"></a><a id="JFXWN124" name="JFXWN124"></a>
<p class="titleinfigure">Figure 6 Help Icon</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-help.png" alt="Description of Figure 6 follows" title="Description of Figure 6 follows" longdesc="img_text/webview-help.htm"><br>
<a id="sthref16" name="sthref16" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-help.htm">Description of "Figure 6 Help Icon"</a><br>
<br></div>
<!-- class="figure" -->
<p>Click Help to load the help.html file. Examine the content of the file, then click the Exit the Application link, shown in <a href="#CEGCBIIA">Figure 7</a>, to close the WebViewSample application.</p>
<div class="figure"><a id="CEGCBIIA" name="CEGCBIIA"></a><a id="JFXWN125" name="JFXWN125"></a>
<p class="titleinfigure">Figure 7 Help.html file</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-exit.png" alt="Description of Figure 7 follows" title="Description of Figure 7 follows" longdesc="img_text/webview-exit.htm"><br>
<a id="sthref17" name="sthref17" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-exit.htm">Description of "Figure 7 Help.html file"</a><br>
<br></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="JFXWN126" name="JFXWN126"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref18" name="sthref18"></a>
<h2 class="sect1">Managing Web Pop-Up Windows</h2>
<p>You can set an alternative <code>WebView</code> object for the documents that will be opened in a separate window. <a href="#CEGCIDII">Figure 8</a> shows a context menu a user can open by right-clicking any link.</p>
<div class="figure"><a id="CEGCIDII" name="CEGCIDII"></a><a id="JFXWN127" name="JFXWN127"></a>
<p class="titleinfigure">Figure 8 Pop-Up Window</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-popup.png" alt="Description of Figure 8 follows" title="Description of Figure 8 follows" longdesc="img_text/webview-popup.htm"><br>
<a id="sthref19" name="sthref19" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-popup.htm">Description of "Figure 8 Pop-Up Window"</a><br>
<br></div>
<!-- class="figure" -->
<p>To specify a new browser window for the target document, use the <code>PopupFeatures</code> instance as shown in the modified application code in <a href="#CEGJHJEA">Example 9</a>.</p>
<div class="example"><a id="CEGJHJEA" name="CEGJHJEA"></a><a id="JFXWN128" name="JFXWN128"></a>
<p class="titleinexample">Example 9 Processing a Command of a Pop-Up Window</p>
<pre xml:space="preserve" class="oac_no_warn">import javafx.application.Application;
import javafx.application.Platform;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.concurrent.Worker.State;
import javafx.event.ActionEvent;
import javafx.event.Event;
import javafx.event.EventHandler;
import javafx.geometry.HPos;
import javafx.geometry.Pos;
import javafx.geometry.VPos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Hyperlink;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.paint.Color;
import javafx.scene.web.PopupFeatures;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
import javafx.util.Callback;
import netscape.javascript.JSObject;
 
public class WebViewSample extends Application {
 
    private Scene scene;
 
    @Override
    public void start(Stage stage) {
        // create scene
        stage.setTitle("Web View");
        scene = new Scene(new Browser(), 750, 500, Color.web("#666970"));
        stage.setScene(scene);
        // apply CSS style
        scene.getStylesheets().add("webviewsample/BrowserToolbar.css");
        // show stage
        stage.show();
    }
 
    public static void main(String[] args) {
        launch(args);
    }
}
 
class Browser extends Region {
 
    private HBox toolBar;
    private static String[] imageFiles = new String[]{
        "product.png",
        "blog.png",
        "documentation.png",
        "partners.png",
        "help.png"
    };
    private static String[] captions = new String[]{
        "Products",
        "Blogs",
        "Documentation",
        "Partners",
        "Help"
    };
    private static String[] urls = new String[]{
        "http://www.oracle.com/products/index.html",
        "http://blogs.oracle.com/",
        "http://docs.oracle.com/javase/index.html",
        "http://www.oracle.com/partners/index.html",
        WebViewSample.class.getResource("help.html").toExternalForm()
    };
    final ImageView selectedImage = new ImageView();
    final Hyperlink[] hpls = new Hyperlink[captions.length];
    final Image[] images = new Image[imageFiles.length];
    final WebView browser = new WebView();
    final WebEngine webEngine = browser.getEngine();
    final Button showPrevDoc = new Button("Toggle Previous Docs");
    <span class="bold">final WebView smallView = new WebView();</span>
    private boolean needDocumentationButton = false;
 
    public Browser() {
        //apply the styles
        getStyleClass().add("browser");
 
        for (int i = 0; i &lt; captions.length; i++) {
            // create hyperlinks
            Hyperlink hpl = hpls[i] = new Hyperlink(captions[i]);
            Image image = images[i] =
                    new Image(getClass().getResourceAsStream(imageFiles[i]));
            hpl.setGraphic(new ImageView(image));
            final String url = urls[i];
            final boolean addButton = (hpl.getText().equals("Documentation"));
 
            // process event 
            hpl.setOnAction(new EventHandler&lt;ActionEvent&gt;() {
                @Override
                public void handle(ActionEvent e) {
                    needDocumentationButton = addButton;
                    webEngine.load(url);
                }
            });
        }
 
       
        // create the toolbar
        toolBar = new HBox();
        toolBar.setAlignment(Pos.CENTER);
        toolBar.getStyleClass().add("browser-toolbar");
        toolBar.getChildren().addAll(hpls);
        toolBar.getChildren().add(createSpacer());
 
        //set action for the button
        showPrevDoc.setOnAction(new EventHandler() {
            @Override
            public void handle(Event t) {
                webEngine.executeScript("toggleDisplay('PrevRel')");
            }           
        });
 
        smallView.setPrefSize(120, 80);
 
        //handle popup windows
        <span class="bold">webEngine.setCreatePopupHandler(</span>
            <span class="bold">new Callback&lt;PopupFeatures, WebEngine&gt;() {</span>
                <span class="bold">@Override public WebEngine call(PopupFeatures config) {</span>
                    <span class="bold">smallView.setFontScale(0.8);</span>
                    <span class="bold">if (!toolBar.getChildren().contains(smallView)) {</span>
                        <span class="bold">toolBar.getChildren().add(smallView);</span>
                    <span class="bold">}</span>
                    <span class="bold">return smallView.getEngine();</span>
                <span class="bold">}</span>
             <span class="bold">}</span>
        <span class="bold">);</span>
 
        // process page loading
        webEngine.getLoadWorker().stateProperty().addListener(
            new ChangeListener&lt;State&gt;() {
                @Override
                public void changed(ObservableValue&lt;? extends State&gt; ov,
                    State oldState, State newState) {
                    toolBar.getChildren().remove(showPrevDoc);    
                    if (newState == State.SUCCEEDED) {
                            JSObject win = 
                                (JSObject) webEngine.executeScript("window");
                            win.setMember("app", new JavaApp());
                            if (needDocumentationButton) {
                                toolBar.getChildren().add(showPrevDoc);
                            }
                        }
                    }
                }
        );
 
        // load the home page        
        webEngine.load("http://www.oracle.com/products/index.html");
 
        //add components
        getChildren().add(toolBar);
        getChildren().add(browser);
    }
 
    // JavaScript interface object
    public class JavaApp {
 
        public void exit() {
            Platform.exit();
        }
    }
 
    private Node createSpacer() {
        Region spacer = new Region();
        HBox.setHgrow(spacer, Priority.ALWAYS);
        return spacer;
    }
 
    @Override
    protected void layoutChildren() {
        double w = getWidth();
        double h = getHeight();
        double tbHeight = toolBar.prefHeight(w);
        layoutInArea(browser,0,0,w,h-tbHeight,0,HPos.CENTER, VPos.CENTER);
        layoutInArea(toolBar,0,h-tbHeight,w,tbHeight,0,HPos.CENTER,VPos.CENTER);
    }
 
    @Override
    protected double computePrefWidth(double height) {
        return 750;
    }
 
    @Override
    protected double computePrefHeight(double width) {
        return 600;
    }
}
</pre></div>
<!-- class="example" -->
<p>When a user selects the Open option from the pop-up window, the <code>smallView</code> browser is added to the application toolbar. This behavior is defined by the <code>setCreatePopupHandler</code>
 method, which returns the web engine of an alternative browser to 
notify the application where to render the target page. The result of 
compiling and running the modified application is shown in <a href="#CEGIIHBH">Figure 9</a>.</p>
<div class="figure"><a id="CEGIIHBH" name="CEGIIHBH"></a><a id="JFXWN129" name="JFXWN129"></a>
<p class="titleinfigure">Figure 9 Small Preview Browser</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-small.png" alt="Description of Figure 9 follows" title="Description of Figure 9 follows" longdesc="img_text/webview-small.htm"><br>
<a id="sthref20" name="sthref20" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-small.htm">Description of "Figure 9 Small Preview Browser"</a><br>
<br></div>
<!-- class="figure" -->
<p>Note that context menus are enabled by default for all <code>WebView</code> objects. To disable a context menu for a particular <code>WebView</code> instance, pass the false value to the <code>setContextMenuEnabled</code> method: <code>browser.setContextMenuEnabled(false);</code>.</p>
</div>
<!-- class="sect1" -->
<a id="JFXWN130" name="JFXWN130"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref21" name="sthref21"></a>
<h2 class="sect1">Managing Web History</h2>
<p>You can obtain the list of visited pages by using the <code>WebHistory</code> class. It represents a session history associated with a <code>WebEngine</code> object. Use the <code>WebEngine.getHistory()</code> method to get the <code>WebHistory</code> instance for a particular web engine, as shown in the following line: <code>WebHistory history = webEngine.getHistory();</code>.</p>
<p>The history is basically a list of entries. Each entry represents a 
visited page and it provides access to relevant page info, such as URL, 
title, and the date the page was last visited. The list can be obtained 
by using the <code>getEntries()</code> method.</p>
<p>The history list changes as users navigate through the web. Use the <code>ObservableList</code> API to process the changes.</p>
<p>You typically use a standard or custom UI control to display the history list. <a href="#CEGDEBHI">Example 10</a> shows how to obtain a history items and present them in the <code>ComboBox</code> control.</p>
<div class="example"><a id="CEGDEBHI" name="CEGDEBHI"></a><a id="JFXWN131" name="JFXWN131"></a>
<p class="titleinexample">Example 10 Obtaining and Processing the List of Web History Items</p>
<pre xml:space="preserve" class="oac_no_warn">final WebHistory history = webEngine.getHistory();
history.getEntries().addListener(new 
    ListChangeListener&lt;WebHistory.Entry&gt;() {
        @Override
        public void onChanged(Change&lt;? extends Entry&gt; c) {
            c.next();
            for (Entry e : c.getRemoved()) {
                comboBox.getItems().remove(e.getUrl());
            }
            for (Entry e : c.getAddedSubList()) {
                comboBox.getItems().add(e.getUrl());
            }
        }
    }
);
         
comboBox.setPrefWidth(60);
comboBox.setOnAction(new EventHandler&lt;ActionEvent&gt;() {
    @Override
    public void handle(ActionEvent ev) {
        int offset =
                comboBox.getSelectionModel().getSelectedIndex()
                - history.getCurrentIndex();
        history.go(offset);
    }
});
</pre></div>
<!-- class="example" -->
<p>The <code>ListChangeListener</code> object tracks the changes of history entries and adds the corresponding URLs to the combo box.</p>
<p>When users select any item in the combo box, the web engine is 
navigated to the URL defined by the history entry item, which position 
in the list is defined by the <code>offset</code> value. A negative <code>offset</code> value specifies the position preceding the current entry, and a positive <code>offset</code> value specifies the position following the current entry.</p>
<p><a href="#CEGGECFG">Example 11</a> shows the complete code of the modified application.</p>
<div class="example"><a id="CEGGECFG" name="CEGGECFG"></a><a id="JFXWN132" name="JFXWN132"></a>
<p class="titleinexample">Example 11 WebViewSample with the History Combo Box</p>
<pre xml:space="preserve" class="oac_no_warn">import javafx.application.Application;
import javafx.application.Platform;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.collections.ListChangeListener;
import javafx.collections.ListChangeListener.Change;
import javafx.concurrent.Worker.State;
import javafx.event.ActionEvent;
import javafx.event.Event;
import javafx.event.EventHandler;
import javafx.geometry.HPos;
import javafx.geometry.Pos;
import javafx.geometry.VPos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.ComboBox;
import javafx.scene.control.Hyperlink;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.paint.Color;
import javafx.scene.web.PopupFeatures;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebHistory;
import javafx.scene.web.WebHistory.Entry;
import javafx.scene.web.WebView;
import javafx.stage.Stage;
import javafx.util.Callback;
import netscape.javascript.JSObject;
 
 
public class WebViewSample extends Application {
 
    private Scene scene;
 
    @Override
    public void start(Stage stage) {
        // create scene
        stage.setTitle("Web View");
        scene = new Scene(new Browser(), 750, 500, Color.web("#666970"));
        stage.setScene(scene);
        // apply CSS style
        scene.getStylesheets().add("webviewsample/BrowserToolbar.css");
        // show stage
        stage.show();
    }
 
    public static void main(String[] args) {
        launch(args);
    }
}
class Browser extends Region {
 
    private HBox toolBar;
    private static String[] imageFiles = new String[]{
        "product.png",
        "blog.png",
        "documentation.png",
        "partners.png",
        "help.png"
    };
    private static String[] captions = new String[]{
        "Products",
        "Blogs",
        "Documentation",
        "Partners",
        "Help"
    };
    private static String[] urls = new String[]{
        "http://www.oracle.com/products/index.html",
        "http://blogs.oracle.com/",
        "http://docs.oracle.com/javase/index.html",
        "http://www.oracle.com/partners/index.html",
        WebViewSample.class.getResource("help.html").toExternalForm()
    };
    final ImageView selectedImage = new ImageView();
    final Hyperlink[] hpls = new Hyperlink[captions.length];
    final Image[] images = new Image[imageFiles.length];
    final WebView browser = new WebView();
    final WebEngine webEngine = browser.getEngine();
    final Button showPrevDoc = new Button("Toggle Previous Docs");
    final WebView smallView = new WebView();
    <span class="bold">final ComboBox comboBox = new ComboBox();</span>
    private boolean needDocumentationButton = false;
 
    public Browser() {
        //apply the styles
        getStyleClass().add("browser");
 
        for (int i = 0; i &lt; captions.length; i++) {
            // create hyperlinks
            Hyperlink hpl = hpls[i] = new Hyperlink(captions[i]);
            Image image = images[i] =
                    new Image(getClass().getResourceAsStream(imageFiles[i]));
            hpl.setGraphic(new ImageView(image));
            final String url = urls[i];
            final boolean addButton = (hpl.getText().equals("Documentation"));
 
            // process event 
            hpl.setOnAction(new EventHandler&lt;ActionEvent&gt;() {
                @Override
                public void handle(ActionEvent e) {
                    needDocumentationButton = addButton;
                    webEngine.load(url);
                }
            });
        }
 
        <span class="bold">comboBox.setPrefWidth(60);</span>
 
        // create the toolbar
        toolBar = new HBox();
        toolBar.setAlignment(Pos.CENTER);
        toolBar.getStyleClass().add("browser-toolbar");
        toolBar.getChildren().add(comboBox);
        toolBar.getChildren().addAll(hpls);
        toolBar.getChildren().add(createSpacer());
 
        //set action for the button
        showPrevDoc.setOnAction(new EventHandler() {
            @Override
            public void handle(Event t) {
                webEngine.executeScript("toggleDisplay('PrevRel')");
            }           
        });
 
        smallView.setPrefSize(120, 80);
 
        //handle popup windows
        webEngine.setCreatePopupHandler(
            new Callback&lt;PopupFeatures, WebEngine&gt;() {
                @Override public WebEngine call(PopupFeatures config) {
                    smallView.setFontScale(0.8);
                    if (!toolBar.getChildren().contains(smallView)) {
                        toolBar.getChildren().add(smallView);
                    }
                    return smallView.getEngine();
                }
             }
        );
 
        <span class="bold">//process history</span>
        <span class="bold">final WebHistory history = webEngine.getHistory();</span>
        <span class="bold">history.getEntries().addListener(new</span> 
            <span class="bold">ListChangeListener&lt;WebHistory.Entry&gt;(){</span>
                <span class="bold">@Override</span>
                <span class="bold">public void onChanged(Change&lt;? extends Entry&gt; c) {</span>
                    <span class="bold">c.next();</span>
                    <span class="bold">for (Entry e : c.getRemoved()) {</span>
                        <span class="bold">comboBox.getItems().remove(e.getUrl());</span>
                    <span class="bold">}</span>
                    <span class="bold">for (Entry e : c.getAddedSubList()) {</span>
                        <span class="bold">comboBox.getItems().add(e.getUrl());</span>
                    <span class="bold">}</span>
                <span class="bold">}</span>
        <span class="bold">});</span>
 
        <span class="bold">//set the behavior for the history combobox</span>               
        <span class="bold">comboBox.setOnAction(new EventHandler&lt;ActionEvent&gt;() {</span>
            <span class="bold">@Override</span>
            <span class="bold">public void handle(ActionEvent ev) {</span>
                <span class="bold">int offset =</span>
                        <span class="bold">comboBox.getSelectionModel().getSelectedIndex()</span>
                        <span class="bold">- history.getCurrentIndex();</span>
                <span class="bold">history.go(offset);</span>
            <span class="bold">}</span>
        <span class="bold">});</span>
 
 
        // process page loading
        webEngine.getLoadWorker().stateProperty().addListener(
            new ChangeListener&lt;State&gt;() {
                @Override
                public void changed(ObservableValue&lt;? extends State&gt; ov,
                    State oldState, State newState) {
                    toolBar.getChildren().remove(showPrevDoc);    
                    if (newState == State.SUCCEEDED) {
                            JSObject win = 
                                (JSObject) webEngine.executeScript("window");
                            win.setMember("app", new JavaApp());
                            if (needDocumentationButton) {
                                toolBar.getChildren().add(showPrevDoc);
                            }
                        }
                    }
                }
        );
 
        // load the home page        
        webEngine.load("http://www.oracle.com/products/index.html");
 
        //add components
        getChildren().add(toolBar);
        getChildren().add(browser);
    }
 
    // JavaScript interface object
    public class JavaApp {
 
        public void exit() {
            Platform.exit();
        }
    }
 
    private Node createSpacer() {
        Region spacer = new Region();
        HBox.setHgrow(spacer, Priority.ALWAYS);
        return spacer;
    }
 
    @Override
    protected void layoutChildren() {
        double w = getWidth();
        double h = getHeight();
        double tbHeight = toolBar.prefHeight(w);
        layoutInArea(browser,0,0,w,h-tbHeight,0,HPos.CENTER,VPos.CENTER);
        layoutInArea(toolBar,0,h-tbHeight,w,tbHeight,0,HPos.CENTER,VPos.CENTER);
    }
 
    @Override
    protected double computePrefWidth(double height) {
        return 750;
    }
 
    @Override
    protected double computePrefHeight(double width) {
        return 600;
    }
}
</pre></div>
<!-- class="example" -->
<p>When you compile and run the application, it produces the window shown in <a href="#CEGEFIJC">Figure 10</a>.</p>
<div class="figure"><a id="CEGEFIJC" name="CEGEFIJC"></a><a id="JFXWN133" name="JFXWN133"></a>
<p class="titleinfigure">Figure 10 Selecting URL from the History Combo Box</p>
<img src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/webview-history.png" alt="Description of Figure 10 follows" title="Description of Figure 10 follows" longdesc="img_text/webview-history.htm"><br>
<a id="sthref22" name="sthref22" href="https://docs.oracle.com/javafx/2/webview/img_text/webview-history.htm">Description of "Figure 10 Selecting URL from the History Combo Box"</a><br>
<br></div>
<!-- class="figure" -->
<p>In your JavaFX application, you can implement browser tabs by using the <code>TabPane</code> class and create a new <code>WebView</code> object when a user adds a new tab.</p>
<p>To further enhance this application, you can apply effects, transformations and animated transitions, and even add more <code>WebView</code> instances.</p>
<p>See the JavaFX API documentation and the JavaFX CSS specification for
 more information about available features. You can also study the <a href="https://docs.oracle.com/javafx/2/swing/jfxpub-swing.htm">JavaFX in Swing</a> tutorial to learn how to add a <code>WebView</code> component in your existing Swing application.</p>
<p class="itemizedlisttitle">Related API Documentation&nbsp;</p>
<ul>
<li>
<p><code>WebView</code></p>
</li>
<li>
<p><code>WebEngine</code></p>
</li>
<li>
<p><code>WebHistory</code></p>
</li>
<li>
<p><code>Region</code></p>
</li>
<li>
<p><code>Hyperlink</code></p>
</li>
<li>
<p><code>Worker</code></p>
</li>
</ul>
</div>
<!-- class="sect1" -->
	
	

    <!-- /////////////// End content copied from DARB output ////////////// -->

    </div>  <!-- End ind div tag --> 

  <!-- START NEXT_PREVIOUS BUTTONS -->
  <!-- [REPLACE_NEXT_PREVIOUS] -->
  <!-- END NEXT_PREVIOUS BUTTONS -->

    
<!-- end #mainContent --></div><br class="clearfloat">
<!--///////// End Main Content /////////-->	
    
    
    
<!--///////// Footer /////////-->
  <div id="footer">
  
  <!-- Start SiteCatalyst (Omniture) code   -->
<script type="text/javascript" src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/s_code_download.js"></script>
<script type="text/javascript" src="Adding%20HTML%20Content%20to%20JavaFX%20Applications%20_%20JavaFX%202%20Tutorials%20and%20Documentation_soubory/s_code.js"></script>

 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->

<!--  Below code will send the info to Omniture server -->
<script type="text/javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>
 
<!-- End SiteCatalyst code --> 

<!-- Footer Legal info -->
  <div id="fx_blur"><span class="copyrightlogo">Copyright&nbsp;©&nbsp;2008, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.</span> 
  <a href="https://docs.oracle.com/javafx/dcommon/html/cpyr.htm"><br>
  <span class="copyrightlogo">Legal Notices</span></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="copyrightlogo"><a href="https://docs.oracle.com/javafx/dcommon/html/accss.htm">Accessibility Statement</a></span>
  </div> <!-- End footer legal info -->
  
  <!-- end #footer --></div>
<!--///////// End Footer /////////-->

<!-- end #container --></div>





</body></html>